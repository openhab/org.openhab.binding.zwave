<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="zwave"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
  xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0
                      https://openhab.org/schemas/thing-description/v1.0.0">

  <thing-type id="everspring_hsm02_00_000" listed="false">
    <label>HSM02 Door/Window Contact</label>
    <description>Door/Window Contact&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gtMini Door / Window Contact Detector&lt;/p&gt &lt;br /&gt&lt;h2&gtInclusion Information&lt;/h2&gt&lt;p&gtPressing tamper switch three times within 1.5 second will enter inclusion mode. &lt;/p&gt &lt;br /&gt&lt;h2&gtExclusion Information&lt;/h2&gt&lt;p&gtPressing tamper switch three times within 1.5 second will enter exclusion mode. &lt;/p&gt &lt;br /&gt&lt;h2&gtWakeup Information&lt;/h2&gt&lt;p&gtif set up is still needed, the user can press Tamper once more for HSM02 to be awake for another 30 sec.&lt;/p&gt</description>
    <category>Window</category>

    <!-- CHANNEL DEFINITIONS -->
    <channels>
      <channel id="sensor_door" typeId="sensor_door">
        <label>Door / Window Status</label>
        <properties>
          <property name="binding:*:OpenClosedType">COMMAND_CLASS_SENSOR_BINARY,COMMAND_CLASS_BASIC</property>
        </properties>
      </channel>
      <channel id="alarm_general" typeId="alarm_general">
        <label>Alarm</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_ALARM</property>
        </properties>
      </channel>
      <channel id="battery-level" typeId="system.battery-level">
        <properties>
          <property name="binding:*:PercentType">COMMAND_CLASS_BATTERY</property>
        </properties>
      </channel>
    </channels>

    <!-- DEVICE PROPERTY DEFINITIONS -->
    <properties>
      <property name="vendor">Everspring</property>
      <property name="modelId">HSM02</property>
      <property name="manufacturerId">0060</property>
      <property name="manufacturerRef">0002:0002,0202:0001</property>
      <property name="dbReference">34</property>
      <property name="defaultAssociations">1,2</property>
    </properties>

    <!-- CONFIGURATION DESCRIPTIONS -->
    <config-description>

      <!-- GROUP DEFINITIONS -->
      <parameter-group name="configuration">
        <context>setup</context>
        <label>Configuration Parameters</label>
      </parameter-group>

      <parameter-group name="association">
        <context>link</context>
        <label>Association Groups</label>
      </parameter-group>

      <!-- PARAMETER DEFINITIONS -->
      <parameter name="config_1_2" type="integer" groupName="configuration"
                 min="0" max="99">
        <label>1: Basic Set Level</label>
        <description>Value to be sent with a BASIC SET command&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gt0: Off&amp;lt;/p&amp;amp;gt &amp;lt;p&amp;amp;gt1-99, 255: Dim Level (Multilevel Switch Device), ON (Binary Switch Device)&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>99</default>
      </parameter>

      <parameter name="config_2_1" type="integer" groupName="configuration"
                 min="0" max="127">
        <label>2: Configuring the OFF Delay</label>
        <description>OFF Delay in seconds&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThe Configuration parameter that can be used to adjust the amount of delay before the OFF command is transmitted. This parameter can be configured as 0-127, where 0 means sending OFF command immediately and 127 means 127 seconds of delay. &amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
      </parameter>

      <parameter name="config_3_1" type="integer" groupName="configuration"
                 min="0" max="1">
        <label>3: Staying Awake (for testing)</label>
        <description>Staying Awake (for testing)&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtCan be used to determine if the unit stays &quot;awake&quot; all the time. This parameter can be configured as 0 or 1, where 1 means &quot;enabled&quot; and 0 stands for &quot;disabled&quot;&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
        <advanced>true</advanced>
      </parameter>

      <!-- ASSOCIATION DEFINITIONS -->
      <parameter name="group_1" type="text" groupName="association">
        <label>1: Target for reports</label>
        <description>Support ALARM_REPORT, SENSOR_BINARY_SUPPORT&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;h1&gtPower Applied (Alarm Report)&lt;/h1&gt &lt;p&gtOnce the power has been applied, Alarm Report Command will be sent to Nodes in Grouping 1 to confirm the power applied status for HSM02. &lt;/p&gt &lt;p&gtPower Applied Notice:&lt;strong&gt[Command Class Alarm, Alarm Report, Alarm Type = 0x02, Alarm Level = 0x01]&lt;/strong&gt&lt;/p&gt &lt;h1&gtMagnet status report (Binary Sensor Report)&lt;/h1&gt &lt;p&gtWhen the magnets of HSM02 are to be opened, Binary Sensor Report Command (Value = 0xFF) will be sent to Nodes in Grouping 1, and when the magnets are to be closed, Binary Sensor Report Command (Value = 0x00) will be sent as well.&lt;/p&gt &lt;p&gtMagnets to be opened: &lt;strong&gt[Command Class Sensor Binary, Sensor Binary Report, Value = 0xFF(255)]&lt;br /&gt&lt;/strong&gtMagnets to be closed: &lt;strong&gt[Command Class Sensor Binary, Sensor Binary Report, Value = 0x00(0)]&lt;/strong&gt&lt;/p&gt &lt;h1&gtLow Battery Report (Alarm Report)&lt;/h1&gt &lt;p&gtWhen HSM02 automatically wakes up, it will check the battery usage. When low battery is detected, Alarm Report Command will be sent to Nodes in Grouping 1, afterward, LED will light up for 1 sec to remind user when HSM02 is triggered due to open or close incidents.&lt;/p&gt &lt;p&gtLow Battery Report : &lt;strong&gt[Command Class Alarm, Alarm Report, Alarm Type = 0x01, Alarm Level = 0xFF]&lt;/strong&gt&lt;/p&gt &lt;h1&gtTamper Event Report (Alarm Report)&lt;/h1&gt &lt;p&gtPress and hold the tamper switch more than 10 seconds then release, the unit will send ALARM REPORT command to the nodes of Grouping 1 to inform them there is a tamper event.&lt;/p&gt &lt;p&gtTamper Event Report : &lt;strong&gt[Command Class Alarm, Alarm Report, Alarm Type = 0x01, Alarm Level = 0x11] &lt;/strong&gt&lt;/p&gt</description>
      </parameter>

      <parameter name="group_2" type="text" groupName="association" multiple="true">
        <label>2: Target nodes who receive BASIC_SET command</label>
        <description>&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;h1&gtControl other Z-Wave Devices &lt;/h1&gt &lt;p&gtWhen door/window is opened, the unit will send BASIC_SET command which contains a value that is adjustable, to the nodes of Grouping 2. For instance, the brightness level of a lamp module can be fixed according to the set value. &lt;/p&gt &lt;p&gtWhen the door/window is closed, the BASIC_SET command will also be sent to the nodes of Grouping 2. For instance, a lamp module will be turned off after receiving the BASIC_SET command&lt;/p&gt &lt;p&gtBasic Set Command:&lt;br /&gtEvent Present: &lt;strong&gt[Command Class Basic, Basic Set, Value = 99 (0x63)] &lt;/strong&gt&lt;br /&gtEvent Clear: &lt;strong&gt[Command Class Basic, Basic Set, Value = 0 (0x00)] &lt;/strong&gt&lt;/p&gt</description>
        <multipleLimit>5</multipleLimit>
      </parameter>

      <!-- STATIC DEFINITIONS -->
      <parameter name="node_id" type="integer" min="1" max="232" readOnly="true" required="true">
        <label>Node ID</label>
        <advanced>true</advanced>
      </parameter>

    </config-description>

  </thing-type>

</thing:thing-descriptions>
