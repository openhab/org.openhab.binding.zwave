<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="zwave"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:thing="https://openhab.org/schemas/thing-description/v1.0.0"
  xsi:schemaLocation="https://openhab.org/schemas/thing-description/v1.0.0
                      https://openhab.org/schemas/thing-description/v1.0.0">

  <thing-type id="fibaro_fgwpb111_00_000" listed="false">
    <label>FGWPB-111 FIBARO Wall Plug</label>
    <description>FIBARO Wall Plug&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gtFIBARO Wall Plug is a remotely controlled plug-in switch with the ability to measure power and energy consumption.&lt;/p&gt &lt;ul&gt&lt;li&gtCompatible with type B sockets and plugs.&lt;/li&gt &lt;li&gtCompatible with any Z-Wave or Z-Wave+ Controller.&lt;/li&gt &lt;li&gtSupports Z-Wave network Security Modes: S0 with AES-128 encryption and S2 with PRNG-based encryption.&lt;/li&gt &lt;li&gtExtremely easy installation – simply plug the device into the mains socket.&lt;/li&gt &lt;li&gtActive power and energy consumption metering.&lt;/li&gt &lt;li&gtEquipped with USB charging port with power metering (only FGWPB-121).&lt;/li&gt &lt;li&gtWorks as a Z-Wave signal repeater.&lt;/li&gt &lt;li&gtCurrent value of the load and operating mode are indicated by the multi-color LED frame.&lt;/li&gt &lt;/ul&gt&lt;br /&gt&lt;h2&gtInclusion Information&lt;/h2&gt&lt;ol&gt&lt;li&gtPlug the device into a socket nearby the main Z-Wave controller.&lt;/li&gt &lt;li&gtThe LED frame will glow red signaling not being added (reset or remove the device otherwise)&lt;/li&gt &lt;li&gtSet the main controller into the adding mode (see the controller’s manual).&lt;/li&gt &lt;li&gtQuickly, triple click the button located on the casing.&lt;/li&gt &lt;li&gtIf you are adding in S2 authenticated mode, type in the device pin code (underlined part of the public key available on the device or in the manual).&lt;/li&gt &lt;li&gtWait for the adding process to end.&lt;/li&gt &lt;li&gtSuccessful adding will be confirmed by the Z-Wave controller’s message.&lt;/li&gt &lt;/ol&gt&lt;br /&gt&lt;h2&gtExclusion Information&lt;/h2&gt&lt;ol&gt&lt;li&gtPlug the device into a socket nearby the main Z-Wave controller.&lt;/li&gt &lt;li&gtThe LED frame will glow green signaling being added (removing is not necessary otherwise).&lt;/li&gt &lt;li&gtSet the main controller in remove mode (see the controller's manual).&lt;/li&gt &lt;li&gtQuickly, triple click the button located on the casing.&lt;/li&gt &lt;li&gtWait for the removing process to end.&lt;/li&gt &lt;li&gtSuccessful removing will be confirmed by the Z-Wave controller’s message.&lt;/li&gt &lt;/ol&gt</description>
    <category>PowerOutlet</category>

    <!-- CHANNEL DEFINITIONS -->
    <channels>
      <channel id="switch_binary" typeId="switch_binary">
        <label>Switch</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_SWITCH_BINARY,COMMAND_CLASS_BASIC</property>
        </properties>
      </channel>
      <channel id="meter_watts" typeId="meter_watts">
        <label>Electric meter (watts)</label>
        <properties>
          <property name="binding:*:DecimalType">COMMAND_CLASS_METER;type=E_W</property>
        </properties>
      </channel>
      <channel id="meter_kwh" typeId="meter_kwh">
        <label>Electric meter (kWh)</label>
        <properties>
          <property name="binding:*:DecimalType">COMMAND_CLASS_METER;type=E_KWh</property>
        </properties>
      </channel>
      <channel id="alarm_power" typeId="alarm_power">
        <label>Alarm (power)</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_ALARM;type=POWER_MANAGEMENT</property>
        </properties>
      </channel>
      <channel id="alarm_system" typeId="alarm_system">
        <label>Alarm (system)</label>
        <properties>
          <property name="binding:*:OnOffType">COMMAND_CLASS_ALARM;type=SYSTEM</property>
        </properties>
      </channel>
    </channels>

    <!-- DEVICE PROPERTY DEFINITIONS -->
    <properties>
      <property name="vendor">Fibargroup</property>
      <property name="modelId">FGWPB-111</property>
      <property name="manufacturerId">010F</property>
      <property name="manufacturerRef">1701:2000</property>
      <property name="dbReference">1119</property>
      <property name="defaultAssociations">1</property>
    </properties>

    <!-- CONFIGURATION DESCRIPTIONS -->
    <config-description>

      <!-- GROUP DEFINITIONS -->
      <parameter-group name="configuration">
        <context>setup</context>
        <label>Configuration Parameters</label>
      </parameter-group>

      <parameter-group name="association">
        <context>link</context>
        <label>Association Groups</label>
      </parameter-group>

      <!-- PARAMETER DEFINITIONS -->
      <parameter name="config_2_1" type="integer" groupName="configuration">
        <label>2: PowerFailure</label>
        <description>How the Wall Plug will react in the event of power supply failure&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtAfter the power supply is back on, the Wall Plug can be restored to the previous state or remain switched off&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>1</default>
        <options>
          <option value="0">Off</option>
          <option value="1">Restore</option>
        </options>
      </parameter>

      <parameter name="config_3_2" type="integer" groupName="configuration"
                 min="0" max="18000">
        <label>3: Overload safety switch</label>
        <description>turn off the controlled device in case of exceeding the defined power.&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis function allows to turn off the controlled device in case of ex- ceeding the defined power.&amp;lt;/p&amp;amp;gt &amp;lt;p&amp;amp;gtControlled device can be turned back on via button or sending a con- trol frame. By default this function is inactive.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
      </parameter>

      <parameter name="config_11_1" type="integer" groupName="configuration"
                 min="0" max="100">
        <label>11: PowerReporting</label>
        <description>Minimum change in active power consumption to trigger&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter determines the minimum percentage change in active power consumption (in relation to the previously reported) that will result in sending new power report.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>15</default>
      </parameter>

      <parameter name="config_12_2" type="integer" groupName="configuration"
                 min="0" max="500">
        <label>12: EnergyReportingThreshold</label>
        <description>Energy reporting threshold&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter determines the minimum change in energy consumption (in relation to the previously reported) that will result in sending a new report.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>10</default>
      </parameter>

      <parameter name="config_13_2" type="integer" groupName="configuration"
                 min="0" max="32400">
        <label>13: PeriodicPowerRpt</label>
        <description>Periodic power reporting&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter defines time period between independent reports sent when changes in power load have not been recorded or if changes are insignificant. By default reports are sent every hour.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>3600</default>
      </parameter>

      <parameter name="config_14_2" type="integer" groupName="configuration"
                 min="0" max="32400">
        <label>14: PeriodicEnergyRpt</label>
        <description>Periodic energy reporting&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter defines time period between independent reports sent when changes in power load have not been recorded or if changes are insignificant. By default reports are sent every hour.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>3600</default>
      </parameter>

      <parameter name="config_15_1" type="integer" groupName="configuration">
        <label>15: SelfConsumption</label>
        <description>Measuring energy consumed by the Wall Plug itself&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter determines whether power metering should include the amount of power consumed by the Wall Plug itself. Results are being added to the value of power consumed by controlled device.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
        <options>
          <option value="0">function inactive</option>
          <option value="1">function active</option>
        </options>
      </parameter>

      <parameter name="config_21_2" type="integer" groupName="configuration"
                 min="100" max="18000">
        <label>21: UPValue</label>
        <description>UP value -On/Off (Power) association group (3)&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtupper power threshold, used in parameter 23. uP value cannot be lower than a value specified in parameter 22.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>500</default>
      </parameter>

      <parameter name="config_22_2" type="integer" groupName="configuration"
                 min="0" max="17900">
        <label>22: DOWNvalue</label>
        <description>lower power threshold&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtLower power threshold, used in parameter 23. DOWn value cannot be higher than a value specified in parameter 21.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>300</default>
      </parameter>

      <parameter name="config_23_1" type="integer" groupName="configuration">
        <label>23: ControlMode</label>
        <description>the way that 3rd association group devices are controlled&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter defines the way that 3rd association group devices are controlled. Depends on the actual measured power (according to parameters 21 and 22 settings).&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>3</default>
        <options>
          <option value="1">Going Up</option>
          <option value="2">Going Down</option>
          <option value="3">Both Ways</option>
        </options>
      </parameter>

      <parameter name="config_24_2" type="integer" groupName="configuration"
                 min="0" max="255">
        <label>24: SwitchOn</label>
        <description>Command sent when physical button is pressed&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThe value of BASIC SET command frame sent to the devices associat- ed in 2nd group „On/Off (Button)” when turning the device On using the button.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>255</default>
      </parameter>

      <parameter name="config_25_2" type="integer" groupName="configuration" readOnly="true"
                 min="0" max="255">
        <label>25: SwitchOff</label>
        <description>Command sent when button turned off.&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThe value of BASIC SET command frame sent to the devices associat- ed in 2nd group „On/Off (Button)” when turning the device OFF using the button.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
      </parameter>

      <parameter name="config_26_2" type="integer" groupName="configuration"
                 min="0" max="255">
        <label>26: ThresholdUpCmd</label>
        <description>Command sent if power exceeds param 21&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThe value of BASIC SET command frame sent to the devices associat- ed in 3rd group „On/Off (Power)” if power exceeded value of param- eter 21.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>255</default>
      </parameter>

      <parameter name="config_27_2" type="integer" groupName="configuration"
                 min="0" max="255">
        <label>27: ThresholdDownCmd</label>
        <description>Command sent when power drops below threshold&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThe value of BASIC SET command frame sent to the devices associ- ated in 3rd group „On/Off (Power)” if power dropped below value of parameter 22.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
      </parameter>

      <parameter name="config_30_1" type="integer" groupName="configuration">
        <label>30: ActiveAlarm</label>
        <description>Z-Wave network alarms to which the Wall Plug will respond&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtDefine Z-Wave network alarms to which the Wall Plug will respond.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>63</default>
        <options>
          <option value="1">general alarm</option>
          <option value="2">smoke alarm</option>
          <option value="4">CO Alarm</option>
          <option value="8">CO2 Alarm</option>
          <option value="16">High Temp Alarm</option>
          <option value="32">flood alarm</option>
          <option value="63">all</option>
        </options>
      </parameter>

      <parameter name="config_31_1" type="integer" groupName="configuration"
                 min="0" max="50">
        <label>31: AlarmResponse</label>
        <description>how the Wall Plug will respond to alarms&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter defines how the Wall Plug will respond to alarms (de- vice’s status change).&amp;lt;/p&amp;amp;gt &amp;lt;p&amp;amp;gtIn case of values 1 or 2 the Wall Plug is operating normally and LED frame signals an alarm through time defined in parameter 32 or until the alarm is canceled.&amp;lt;/p&amp;amp;gt &amp;lt;p&amp;amp;gtIn case of values 5 to 50 the Wall Plug does not report status change, power changes, ignores BASIC SET command frames. After time defined in parameter 32 or after the alarm cancellation, connected device is set to the previous state.&amp;lt;/p&amp;amp;gt &amp;lt;p&amp;amp;gt5-50 (0.5-5.0s, step 0.1s) - cyclically change device state with set period&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>0</default>
        <options>
          <option value="0">no reaction</option>
          <option value="1">turn connected device on</option>
          <option value="2">turn connected device off</option>
        </options>
        <limitToOptions>false</limitToOptions>
      </parameter>

      <parameter name="config_32_2" type="integer" groupName="configuration"
                 min="1" max="32400">
        <label>32: AlarmDuration</label>
        <description>duration of alarm state&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter specifies the duration of alarm state. If a device send- ing an alarm frame through the Z-Wave network sets alarm duration as well, this settings are ignored.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>600</default>
      </parameter>

      <parameter name="config_40_2" type="integer" groupName="configuration"
                 min="1000" max="18000">
        <label>40: PwrLoadViolet</label>
        <description>maximum active power value causes the LED frame to flash violet&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter determines maximum active power value, which when exceeded, causes the LED frame to flash violet. Function is active only when parameter 41 is set to 1 or 2.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>18000</default>
      </parameter>

      <parameter name="config_41_1" type="integer" groupName="configuration">
        <label>41: LEDwhenOn</label>
        <description>LED frame color when controlled device is on&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtWhen set to 1 or 2, LED frame color will change depending on active power and parameter 40. Other colors are set permanently and do not depend on power consumption.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>1</default>
        <options>
          <option value="0">illumination turned off completely</option>
          <option value="1">color changes smoothly depending on active power</option>
          <option value="2">color changes in steps depending on active power</option>
          <option value="3">white</option>
          <option value="4">red</option>
          <option value="5">green</option>
          <option value="6">blue</option>
          <option value="7">yellow</option>
          <option value="8">cyan</option>
          <option value="9">magenta</option>
        </options>
      </parameter>

      <parameter name="config_42_1" type="integer" groupName="configuration">
        <label>42: LEDwhenOff</label>
        <description>LED frame color when controlled device is off&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter defines the illumination color after turning off.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>1</default>
        <options>
          <option value="0">illumination turned off completely</option>
          <option value="1">LED frame is illuminated with last color</option>
          <option value="3">white</option>
          <option value="4">red</option>
          <option value="5">green</option>
          <option value="6">blue</option>
          <option value="7">yellow</option>
          <option value="8">cyan</option>
          <option value="9">magenta</option>
        </options>
      </parameter>

      <parameter name="config_43_1" type="integer" groupName="configuration">
        <label>43: LEDwhenAlarm</label>
        <description>LED frame color at the Z-Wave network alarm detection&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt&lt;p&gt&amp;lt;p&amp;amp;gtThis parameter defines the illumination color in case of Z-Wave alarm.&amp;lt;/p&amp;amp;gt&lt;/p&gt</description>
        <default>2</default>
        <options>
          <option value="0">illumination turned off completely</option>
          <option value="1">no change in color</option>
          <option value="2">LED frame flashes red/blue/white</option>
          <option value="3">white</option>
          <option value="4">red</option>
          <option value="5">green</option>
          <option value="6">blue</option>
          <option value="7">yellow</option>
          <option value="8">cyan</option>
          <option value="9">magenta</option>
        </options>
      </parameter>

      <!-- ASSOCIATION DEFINITIONS -->
      <parameter name="group_1" type="text" groupName="association">
        <label>1: Lifeline</label>
        <description>reports the device status and allows for assigning single device only</description>
      </parameter>

      <parameter name="group_2" type="text" groupName="association" multiple="true">
        <label>2: OnOffButton</label>
        <description>&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt &lt;p&gtdevices in this group will be switched on or off when relay status is changed using the but- ton&lt;/p&gt</description>
        <multipleLimit>50</multipleLimit>
      </parameter>

      <parameter name="group_3" type="text" groupName="association" multiple="true">
        <label>3: OnOffPlugPower</label>
        <description>&lt;br /&gt&lt;h1&gtOverview&lt;/h1&gt &lt;p&gtdevices in this group will be switched on or off depending on the current load of plugged device (uses Basic command class).&lt;/p&gt</description>
        <multipleLimit>50</multipleLimit>
      </parameter>

      <!-- STATIC DEFINITIONS -->
      <parameter name="node_id" type="integer" min="1" max="232" readOnly="true" required="true">
        <label>Node ID</label>
        <advanced>true</advanced>
      </parameter>

    </config-description>

  </thing-type>

</thing:thing-descriptions>
